// used http://js2coffee.org/ to convert code in http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html, as well as http://stackoverflow.com/questions/17246411/ajax-call-to-render-partial-in-rails-3 to figure out the partial: locals: part

$(document).ready(function() {
  return $("#post-form").on("ajax:success", function(e, data, status, xhr) {
    $("#listing").prepend("<%= escape_javascript(render(partial: 'listings/listing', locals: { listing: @listing })) %>");
    return $("#new_listing").reset();
  }).on("ajax:error", function(e, xhr, status, error) {
    return alert("fail!");
  });
});